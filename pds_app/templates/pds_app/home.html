<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Data Sheet</title>
    {% load static %}
    <link rel="stylesheet" href="{%static 'pds_app/css/style.css' %}">
    <link rel="stylesheet" href="{%static 'pds_app/css/logout.css' %}">
    <link rel="stylesheet" href="{%static 'pds_app/css/modal.css' %}">
</head>
<body>
    <div id="attendanceModal" class="modal" style="display: none;">
        <span id="closeModalBtn" class="close">
            <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="#fff"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
        </span>

        <div class="file-upload-content">
            <h2>Upload File</h2>
            <form method="post" enctype="multipart/form-data" action="{% url 'import_form' %}">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Upload</button>
            </form>
        </div>
    </div>
    <header>
        <h1>Personal Data Sheet System</h1>

        <div class="logout-section">
            {% if user.is_authenticated %}
                <span class="welcome-text">Welcome, {{ user.username }}!</span>
                <a href="{% url 'logout' %}" class="logout-btn">Logout</a>
            {% endif %}
        </div>
    </header>
    

    <div class="container">
        
        <div class="sidebar">
            {% block sidebar %}
            {% endblock sidebar %}
        </div>

        
        <div class="content">
            {% block content %}
            {% endblock content %}
        </div>
    </div>
    
    <!-- for clear button in search -->
    <script>

        const button_clear = document.getElementById("button_clear")

        button_clear.addEventListener("click",()=>{
            window.location = document.getElementById("hidden_a").href
        })
    </script>
    <script>
    function addVoluntaryWorkRow() {
        const table = document.getElementById('voluntary-work-table');
        const newRow = table.insertRow(-1);

        const columns = [
            '<input type="text" name="voluntary_org[]" placeholder="Name and Address of Organization">',
            '<input type="date" style="cursor:pointer" name="voluntary_from[]">',
            '<input type="date" style="cursor:pointer" name="voluntary_to[]">',
            '<input type="number" name="voluntary_hours[]" placeholder="Number of Hours">',
            '<input type="text" name="voluntary_nature[]" placeholder="Position/Nature of Work">',
            '<button type="button" class="delete-row-btn" onclick="deleteRow(this)">Delete</button>'
        ];

        columns.forEach((col, index) => {
            const cell = newRow.insertCell(index);
            cell.innerHTML = col;
        });
    }
    </script>
    <script>
    function addWorkExperienceRow() {
        const table = document.getElementById('work-experience-table');
        const newRow = table.insertRow(-1);

        const columns = [
            '<input type="date" style="cursor:pointer" name="work_from_date[]">',
            '<input type="date" style="cursor:pointer" name="work_to_date[]">',
            '<input type="text" name="work_position_title[]" placeholder="Position Title">',
            '<input type="text" name="work_department[]" placeholder="Department/Agency/Office/Company">',
            '<input type="number" name="work_monthly_salary[]" placeholder="Monthly Salary">',
            '<input type="text" name="work_salary_grade[]" placeholder="Salary Grade & STEP">',
            '<input type="text" name="work_status[]" placeholder="Status of Appointment">',
            '<select name="work_govt_service[]"><option value="Y">Yes</option><option value="N">No</option></select>',
            '<button type="button" class="delete-row-btn" onclick="deleteRow(this)">Delete</button>'
        ];

        columns.forEach((col, index) => {
            const cell = newRow.insertCell(index);
            cell.innerHTML = col;
        });
    }
    </script>

    <script>
    function addCivilServiceRow() {
        const tbody = document.querySelector('#eligibility-table tbody');  
        const newRow = tbody.insertRow(-1);

        const columns = [
            '<input type="text" name="career_service[]" placeholder="Career Service/Eligibility">',
            '<input type="number" name="rating[]" step="0.01" placeholder="Rating">',
            '<input type="date" style="cursor:pointer" name="exam_date[]">',
            '<input type="text" name="exam_place[]" placeholder="Place of Examination/Conferment">',
            '<input type="text" name="license_number[]" placeholder="License Number">',
            '<input type="date" style="cursor:pointer" name="license_validity[]">',
            '<button type="button" class="delete-row-btn" onclick="deleteRow(this)">Delete</button>'
        ];

        columns.forEach((col, index) => {
            const cell = newRow.insertCell(index);
            cell.innerHTML = col;
        });
    }

    </script>


    <script>
    function addLearningDevelopmentRow() {
        const table = document.getElementById('learning-development-table');
        const newRow = table.insertRow(-1);

        const columns = [
            '<input type="text" name="learning_title[]" placeholder="Title">',
            '<input type="date" style="cursor:pointer" name="learning_from[]">',
            '<input type="date" style="cursor:pointer" name="learning_to[]">',
            '<input type="number" name="learning_hours[]" placeholder="Number of Hours">',
            '<input type="text" name="learning_type[]" placeholder="Type of LD">',
            '<input type="text" name="learning_conducted[]" placeholder="Conducted/Sponsored By">',
            '<button type="button" class="delete-row-btn" onclick="deleteRow(this)">Delete</button>'
        ];

        columns.forEach((col, index) => {
            const cell = newRow.insertCell(index);
            cell.innerHTML = col;
        });
    }
    </script>

    <script>
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('delete-row-btn')) {
            e.target.closest('tr').remove();
        }
    });
    </script>

    
    <script src="{% static 'pds_app/js/modal.js' %}"></script>
</body>
</html>