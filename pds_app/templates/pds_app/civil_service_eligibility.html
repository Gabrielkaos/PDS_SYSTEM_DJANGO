{% extends 'pds_app/create_form.html' %}

{% block content %}
<h2>Civil Service Eligibility</h2>
<form method="post" class="educational-background-form">
    {% csrf_token %}
    <table id="eligibility-table" class="educational-table">
        <thead>
            <tr>
                <th  class="educational-table-header">Career Service/Eligibility</th>
                <th  class="educational-table-header">Rating</th>
                <th  class="educational-table-header">Date of Examination/Conferment</th>
                <th  class="educational-table-header">Place of Examination/Conferment</th>
                <th  class="educational-table-header">License Number</th>
                <th  class="educational-table-header">License Validity</th>
                <th  class="educational-table-header">Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="text" name="career_service[]" class="input-field" placeholder="Career Service/Eligibility" required></td>
                <td><input type="number" name="rating[]" class="input-field" step="0.01" placeholder="Rating" required></td>
                <td><input type="date" name="exam_date[]" class="input-field" required></td>
                <td><input type="text" name="exam_place[]" class="input-field" placeholder="Place of Examination/Conferment" required></td>
                <td><input type="text" name="license_number[]" class="input-field" placeholder="License Number" required></td>
                <td><input type="date" name="license_validity[]" class="input-field" required></td>
                <td><button type="button" class="delete-row-btn" onclick="deleteRow(this)">Delete</button></td>
            </tr>
        </tbody>
    </table>
    <button type="button" class="add-row-btn" onclick="addRow()">Add Row</button>
    <br><br>
    <button type="submit" class="submit-btn">Next</button>
</form>

<script>
    function addRow() {
        const table = document.getElementById('eligibility-table');
        const newRow = table.insertRow(-1);

        const columns = [
            '<input type="text" name="career_service[]" class="input-field" placeholder="Career Service/Eligibility" required>',
            '<input type="number" name="rating[]" class="input-field" step="0.01" placeholder="Rating" required>',
            '<input type="date" name="exam_date[]" class="input-field" required>',
            '<input type="text" name="exam_place[]" class="input-field" placeholder="Place of Examination/Conferment" required>',
            '<input type="text" name="license_number[]" class="input-field" placeholder="License Number" required>',
            '<input type="date" name="license_validity[]" class="input-field" required>',
            '<button type="button" class="delete-row-btn" onclick="deleteRow(this)">Delete</button>'
        ];

        columns.forEach((col, index) => {
            const cell = newRow.insertCell(index);
            cell.innerHTML = col;
        });
    }

    function deleteRow(button) {
        const row = button.parentNode.parentNode; 
        row.parentNode.removeChild(row); 
    }
</script>

{% endblock content %}
